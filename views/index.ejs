<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SHOPPING CART</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="d-flex align-items-center justify-content-center flex-column w-100">
      <h1 class="text-center fs-1 text-primary">SHOPPING CART</h1>
      <form
        action="/shoppingcart"
        method="post"
        class="col-10 col-md-8 col-lg-6 mx-auto my-5 p-3 shadow"
      >
        <input
          name="title"
          type="text"
          class="form-control w-100 my-2"
          placeholder="Product"
        />
        <input
          name="description"
          type="text"
          class="form-control w-100 my-2"
          placeholder="Description"
        />
        <input
          name="price"
          type="text"
          class="form-control w-100 my-2"
          placeholder="Price"
        />
        <input
          name="quantity"
          type="text"
          class="form-control w-100 my-2"
          placeholder="Quantity"
        />
        <button type="submit" class="btn btn-primary">Add Goods</button>
      </form>
      
    </div>
    <div class="col-12 col-md-8 col-lg-10 mx-auto my-5 p-4 shadow">
      <% if (UsersArray && UsersArray.length > 0) { %>
        <% let total = 0 %>
        <table class="table">
          <thead>
            <tr>
              <th>Title</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Description</th>
              <th>Subtotal$</th>
            
            </tr>
          </thead>
          <tbody>
            <% UsersArray.forEach(user => { %>
              <% let  subtotal =user.quantity *user.price %>
              <% total += subtotal  %>
              <% +subtotal %>
              <tr>
                <td><%= user.title %></td>
                <td><%= user.price %></td>
                <td><%= user.quantity %></td>
                <td><%= user.description %></td>
                <td><%= user.subtotal %></td>
                <td>
                  <div class="d-flex align-items-center gap-4">
                    <form action="/edit/<%= user._id %>" method="post">
                      <button class="btn btn-primary">Edit</button>
                    </form>
                    <form action="/delete/<%= user._id %>" method="post">
                      <button class="btn btn-danger">Delete</button>
                    </form>
                  </div>
                </td>
              </tr>

            <% }) %>
          </tbody>
           <tfoot>

            <tr>
              <th>Total</th>
              <th><%= total %></th>
            </tr>
            </div>
           </tfoot>
        </table>
    
      
      <% } { %>
      <% } %>
    </div>
    
   
  </body>
</html>
